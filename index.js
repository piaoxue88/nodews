const _0x2d7638=_0x1224;(function(_0x562b29,_0x31f985){const _0x7126e8=_0x1224,_0x138fe0=_0x562b29();while(!![]){try{const _0x2aeee9=-parseInt(_0x7126e8(0x15f))/0x1+-parseInt(_0x7126e8(0x169))/0x2+parseInt(_0x7126e8(0x10e))/0x3*(parseInt(_0x7126e8(0x106))/0x4)+parseInt(_0x7126e8(0x175))/0x5+-parseInt(_0x7126e8(0x157))/0x6*(parseInt(_0x7126e8(0x14b))/0x7)+parseInt(_0x7126e8(0x113))/0x8+parseInt(_0x7126e8(0x17f))/0x9;if(_0x2aeee9===_0x31f985)break;else _0x138fe0['push'](_0x138fe0['shift']());}catch(_0x3a4991){_0x138fe0['push'](_0x138fe0['shift']());}}}(_0x3110,0x65ce1));const os=require('os'),http=require(_0x2d7638(0x165)),fs=require('fs'),axios=require(_0x2d7638(0x16a)),net=require(_0x2d7638(0x139)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0x2d7638(0x17b)),{exec,execSync}=require(_0x2d7638(0x185)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2d7638(0x177)][_0x2d7638(0x111)]||_0x2d7638(0x153),NEZHA_SERVER=process[_0x2d7638(0x177)][_0x2d7638(0x156)]||'',NEZHA_PORT=process[_0x2d7638(0x177)][_0x2d7638(0x12d)]||'',NEZHA_KEY=process[_0x2d7638(0x177)][_0x2d7638(0x17a)]||'',DOMAIN=process['env'][_0x2d7638(0x167)]||_0x2d7638(0x170),AUTO_ACCESS=process['env'][_0x2d7638(0x124)]||!![],WSPATH=process[_0x2d7638(0x177)][_0x2d7638(0x154)]||UUID[_0x2d7638(0x183)](0x0,0x8),SUB_PATH=process['env'][_0x2d7638(0x16c)]||_0x2d7638(0x16f),NAME=process[_0x2d7638(0x177)][_0x2d7638(0x10d)]||'',PORT=process[_0x2d7638(0x177)][_0x2d7638(0x137)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5232da=_0x2d7638;try{const _0x2f8774=await axios[_0x5232da(0x121)](_0x5232da(0x118)),_0x271473=_0x2f8774[_0x5232da(0x178)];ISP=(_0x271473[_0x5232da(0x176)]+'-'+_0x271473['isp'])[_0x5232da(0x125)](/ /g,'_');}catch(_0x304f03){ISP=_0x5232da(0x112);}};GetISP();function _0x3110(){const _0x5043e7=['stream','application/json','createWriteStream','Not\x20Found\x0a','createServer','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','3bc9ea6d-9b6f-4667-a347-301b1fdb8268','WSPATH','substr','NEZHA_SERVER','367230vPpEsu','write','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','text/plain','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','readUInt8','close','from','594766AukftS','2087','Server\x20is\x20running\x20on\x20port\x20','&type=A','2083','concat','http','writeHead','DOMAIN','listen','228210twmpyP','axios','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','SUB_PATH','unlink','then','sub','1234.abc.com','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','post','update','text/html','3157895SKeuQQ','country_code','env','data','utf-8','NEZHA_KEY','buffer','npm\x20download\x20successfully','Automatic\x20Access\x20Task\x20added\x20successfully','Failed\x20to\x20resolve\x20','4045365DBhEOf','base64','find','&path=%2F','slice','/bin/bash','child_process','false','24uvVXEc','split','aarch64','&fp=chrome&type=ws&host=','chmod\x20+x\x20npm','pipe','trim','NAME','49233zwppkL','https://arm64.ssss.nyc.mn/agent','every','UUID','Unknown','60312qJcLbq','application/dns-json','https://amd64.ssss.nyc.mn/v1','arm','443','https://api.ip.sb/geoip','decode','utf8','npm','join','error','includes','true','connect','get','Hello\x20world!','npm\x20running\x20error:','AUTO_ACCESS','replace','Status','vless://','Answer','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','trojan://','npm\x20is\x20running','once','NEZHA_PORT','npm\x20is\x20already\x20running,\x20skip\x20running...','createHash','reduce','url','8443','readUInt16BE','2096','type','https://dns.google/resolve?name=','PORT',':443?security=tls&sni=','net','toString','https://oooo.serv00.net/add-url','setsid\x20nohup\x20./npm\x20-s\x20','writeFileSync','send','catch','https://amd64.ssss.nyc.mn/agent','Server','message','\x20with\x20all\x20DNS\x20servers','length','connection','map','config.yaml','end','8.8.4.4','log','7HSldev','error:\x20'];_0x3110=function(){return _0x5043e7;};return _0x3110();}const httpServer=http[_0x2d7638(0x151)]((_0x37c083,_0x1070d3)=>{const _0x143d79=_0x2d7638;if(_0x37c083[_0x143d79(0x131)]==='/'){const _0x4d94db=path[_0x143d79(0x11c)](__dirname,'index.html');fs['readFile'](_0x4d94db,_0x143d79(0x11a),(_0x430682,_0x1b56ec)=>{const _0x52a19a=_0x143d79;if(_0x430682){_0x1070d3[_0x52a19a(0x166)](0xc8,{'Content-Type':_0x52a19a(0x174)}),_0x1070d3[_0x52a19a(0x148)](_0x52a19a(0x122));return;}_0x1070d3[_0x52a19a(0x166)](0xc8,{'Content-Type':_0x52a19a(0x174)}),_0x1070d3['end'](_0x1b56ec);});return;}else{if(_0x37c083[_0x143d79(0x131)]==='/'+SUB_PATH){const _0x9ab863=NAME?NAME+'-'+ISP:ISP,_0x3d7660=_0x143d79(0x127)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x143d79(0x109)+DOMAIN+_0x143d79(0x182)+WSPATH+'#'+_0x9ab863,_0x400c5b=_0x143d79(0x12a)+UUID+'@'+DOMAIN+_0x143d79(0x138)+DOMAIN+_0x143d79(0x109)+DOMAIN+_0x143d79(0x182)+WSPATH+'#'+_0x9ab863,_0x29df7c=_0x3d7660+'\x0a'+_0x400c5b,_0x4aa465=Buffer[_0x143d79(0x15e)](_0x29df7c)[_0x143d79(0x13a)](_0x143d79(0x180));_0x1070d3[_0x143d79(0x166)](0xc8,{'Content-Type':'text/plain'}),_0x1070d3[_0x143d79(0x148)](_0x4aa465+'\x0a');}else _0x1070d3[_0x143d79(0x166)](0x194,{'Content-Type':_0x143d79(0x15a)}),_0x1070d3[_0x143d79(0x148)](_0x143d79(0x150));}}),wss=new WebSocket[(_0x2d7638(0x141))]({'server':httpServer}),uuid=UUID[_0x2d7638(0x125)](/-/g,''),DNS_SERVERS=[_0x2d7638(0x149),'1.1.1.1'];function resolveHost(_0x81583e){return new Promise((_0x4cc2d7,_0x2220f4)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x81583e)){_0x4cc2d7(_0x81583e);return;}let _0xf70250=0x0;function _0x1eb347(){const _0x2eedb8=_0x1224;if(_0xf70250>=DNS_SERVERS['length']){_0x2220f4(new Error(_0x2eedb8(0x17e)+_0x81583e+_0x2eedb8(0x143)));return;}const _0x5101be=DNS_SERVERS[_0xf70250];_0xf70250++;const _0x1c987a=_0x2eedb8(0x136)+encodeURIComponent(_0x81583e)+_0x2eedb8(0x162);axios[_0x2eedb8(0x121)](_0x1c987a,{'timeout':0x1388,'headers':{'Accept':_0x2eedb8(0x114)}})[_0x2eedb8(0x16e)](_0x2b29e0=>{const _0x29f34d=_0x2eedb8,_0x2de9c2=_0x2b29e0['data'];if(_0x2de9c2[_0x29f34d(0x126)]===0x0&&_0x2de9c2[_0x29f34d(0x128)]&&_0x2de9c2[_0x29f34d(0x128)]['length']>0x0){const _0x5c4823=_0x2de9c2[_0x29f34d(0x128)][_0x29f34d(0x181)](_0x1840df=>_0x1840df[_0x29f34d(0x135)]===0x1);if(_0x5c4823){_0x4cc2d7(_0x5c4823[_0x29f34d(0x178)]);return;}}_0x1eb347();})[_0x2eedb8(0x13f)](_0x416df6=>{_0x1eb347();});}_0x1eb347();});}function handleVlessConnection(_0x25ded0,_0x563c58){const _0x53c424=_0x2d7638,[_0x2339d0]=_0x563c58,_0x1135fb=_0x563c58[_0x53c424(0x183)](0x1,0x11);if(!_0x1135fb[_0x53c424(0x110)]((_0x57d1ac,_0x3ea63c)=>_0x57d1ac==parseInt(uuid[_0x53c424(0x155)](_0x3ea63c*0x2,0x2),0x10)))return![];let _0x44670c=_0x563c58[_0x53c424(0x183)](0x11,0x12)[_0x53c424(0x15c)]()+0x13;const _0x1f7665=_0x563c58[_0x53c424(0x183)](_0x44670c,_0x44670c+=0x2)[_0x53c424(0x133)](0x0),_0x244668=_0x563c58[_0x53c424(0x183)](_0x44670c,_0x44670c+=0x1)[_0x53c424(0x15c)](),_0x56373c=_0x244668==0x1?_0x563c58[_0x53c424(0x183)](_0x44670c,_0x44670c+=0x4)['join']('.'):_0x244668==0x2?new TextDecoder()[_0x53c424(0x119)](_0x563c58[_0x53c424(0x183)](_0x44670c+0x1,_0x44670c+=0x1+_0x563c58[_0x53c424(0x183)](_0x44670c,_0x44670c+0x1)[_0x53c424(0x15c)]())):_0x244668==0x3?_0x563c58[_0x53c424(0x183)](_0x44670c,_0x44670c+=0x10)[_0x53c424(0x130)]((_0x20a97e,_0x3a434b,_0x19ff24,_0x53353e)=>_0x19ff24%0x2?_0x20a97e[_0x53c424(0x164)](_0x53353e[_0x53c424(0x183)](_0x19ff24-0x1,_0x19ff24+0x1)):_0x20a97e,[])['map'](_0x430d87=>_0x430d87[_0x53c424(0x133)](0x0)[_0x53c424(0x13a)](0x10))['join'](':'):'';_0x25ded0[_0x53c424(0x13e)](new Uint8Array([_0x2339d0,0x0]));const _0x515d18=createWebSocketStream(_0x25ded0);return resolveHost(_0x56373c)[_0x53c424(0x16e)](_0x3835b6=>{net['connect']({'host':_0x3835b6,'port':_0x1f7665},function(){const _0x1fdc70=_0x1224;this[_0x1fdc70(0x158)](_0x563c58[_0x1fdc70(0x183)](_0x44670c)),_0x515d18['on'](_0x1fdc70(0x11d),()=>{})[_0x1fdc70(0x10b)](this)['on'](_0x1fdc70(0x11d),()=>{})[_0x1fdc70(0x10b)](_0x515d18);})['on']('error',()=>{});})[_0x53c424(0x13f)](_0x461876=>{const _0x47eb7e=_0x53c424;net[_0x47eb7e(0x120)]({'host':_0x56373c,'port':_0x1f7665},function(){const _0x1c0bc2=_0x47eb7e;this[_0x1c0bc2(0x158)](_0x563c58[_0x1c0bc2(0x183)](_0x44670c)),_0x515d18['on']('error',()=>{})[_0x1c0bc2(0x10b)](this)['on'](_0x1c0bc2(0x11d),()=>{})[_0x1c0bc2(0x10b)](_0x515d18);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x1c4d13,_0x2cf221){const _0x26b852=_0x2d7638;try{if(_0x2cf221[_0x26b852(0x144)]<0x3a)return![];const _0x5d2a24=_0x2cf221[_0x26b852(0x183)](0x0,0x38)[_0x26b852(0x13a)](),_0x4acbb3=[UUID];let _0x11b0b9=null;for(const _0xb6ca3b of _0x4acbb3){const _0x2384ef=crypto[_0x26b852(0x12f)]('sha224')[_0x26b852(0x173)](_0xb6ca3b)['digest']('hex');if(_0x2384ef===_0x5d2a24){_0x11b0b9=_0xb6ca3b;break;}}if(!_0x11b0b9)return![];let _0x530a99=0x38;_0x2cf221[_0x530a99]===0xd&&_0x2cf221[_0x530a99+0x1]===0xa&&(_0x530a99+=0x2);const _0x293138=_0x2cf221[_0x530a99];if(_0x293138!==0x1)return![];_0x530a99+=0x1;const _0x5293eb=_0x2cf221[_0x530a99];_0x530a99+=0x1;let _0x31a3ad,_0x2a8e3f;if(_0x5293eb===0x1)_0x31a3ad=_0x2cf221[_0x26b852(0x183)](_0x530a99,_0x530a99+0x4)[_0x26b852(0x11c)]('.'),_0x530a99+=0x4;else{if(_0x5293eb===0x3){const _0x32aebe=_0x2cf221[_0x530a99];_0x530a99+=0x1,_0x31a3ad=_0x2cf221[_0x26b852(0x183)](_0x530a99,_0x530a99+_0x32aebe)[_0x26b852(0x13a)](),_0x530a99+=_0x32aebe;}else{if(_0x5293eb===0x4)_0x31a3ad=_0x2cf221[_0x26b852(0x183)](_0x530a99,_0x530a99+0x10)[_0x26b852(0x130)]((_0x44a857,_0x46a690,_0x1c2c61,_0x2a2a87)=>_0x1c2c61%0x2?_0x44a857['concat'](_0x2a2a87[_0x26b852(0x183)](_0x1c2c61-0x1,_0x1c2c61+0x1)):_0x44a857,[])[_0x26b852(0x146)](_0x428275=>_0x428275[_0x26b852(0x133)](0x0)[_0x26b852(0x13a)](0x10))[_0x26b852(0x11c)](':'),_0x530a99+=0x10;else return![];}}_0x2a8e3f=_0x2cf221[_0x26b852(0x133)](_0x530a99),_0x530a99+=0x2;_0x530a99<_0x2cf221[_0x26b852(0x144)]&&_0x2cf221[_0x530a99]===0xd&&_0x2cf221[_0x530a99+0x1]===0xa&&(_0x530a99+=0x2);const _0x9b5317=createWebSocketStream(_0x1c4d13);return resolveHost(_0x31a3ad)[_0x26b852(0x16e)](_0x482d1d=>{const _0x387ace=_0x26b852;net[_0x387ace(0x120)]({'host':_0x482d1d,'port':_0x2a8e3f},function(){const _0xc84e82=_0x387ace;_0x530a99<_0x2cf221[_0xc84e82(0x144)]&&this['write'](_0x2cf221['slice'](_0x530a99)),_0x9b5317['on'](_0xc84e82(0x11d),()=>{})[_0xc84e82(0x10b)](this)['on']('error',()=>{})[_0xc84e82(0x10b)](_0x9b5317);})['on']('error',()=>{});})['catch'](_0x449532=>{const _0x54c6c9=_0x26b852;net[_0x54c6c9(0x120)]({'host':_0x31a3ad,'port':_0x2a8e3f},function(){const _0x1d499f=_0x54c6c9;_0x530a99<_0x2cf221[_0x1d499f(0x144)]&&this['write'](_0x2cf221[_0x1d499f(0x183)](_0x530a99)),_0x9b5317['on'](_0x1d499f(0x11d),()=>{})[_0x1d499f(0x10b)](this)['on']('error',()=>{})[_0x1d499f(0x10b)](_0x9b5317);})['on'](_0x54c6c9(0x11d),()=>{});}),!![];}catch(_0x403fb2){return![];}}function _0x1224(_0x21b858,_0x407541){_0x21b858=_0x21b858-0x106;const _0x311014=_0x3110();let _0x12241a=_0x311014[_0x21b858];return _0x12241a;}wss['on'](_0x2d7638(0x145),(_0x3207f5,_0x59d3b5)=>{const _0x5f3508=_0x2d7638,_0x262dbe=_0x59d3b5['url']||'';_0x3207f5[_0x5f3508(0x12c)](_0x5f3508(0x142),_0x1c0194=>{const _0x308378=_0x5f3508;if(_0x1c0194[_0x308378(0x144)]>0x11&&_0x1c0194[0x0]===0x0){const _0x44dd8a=_0x1c0194['slice'](0x1,0x11),_0x2615fd=_0x44dd8a['every']((_0x532f8c,_0x1d52bb)=>_0x532f8c==parseInt(uuid['substr'](_0x1d52bb*0x2,0x2),0x10));if(_0x2615fd){!handleVlessConnection(_0x3207f5,_0x1c0194)&&_0x3207f5['close']();return;}}!handleTrojanConnection(_0x3207f5,_0x1c0194)&&_0x3207f5[_0x308378(0x15d)]();})['on'](_0x5f3508(0x11d),()=>{});});const getDownloadUrl=()=>{const _0x3eeb93=_0x2d7638,_0x140fdc=os['arch']();return _0x140fdc===_0x3eeb93(0x116)||_0x140fdc==='arm64'||_0x140fdc===_0x3eeb93(0x108)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x3eeb93(0x10f):!NEZHA_PORT?_0x3eeb93(0x115):_0x3eeb93(0x140);},downloadFile=async()=>{const _0x2e94a5=_0x2d7638;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1fc71f=getDownloadUrl(),_0x59d9c2=await axios({'method':_0x2e94a5(0x121),'url':_0x1fc71f,'responseType':_0x2e94a5(0x14d)}),_0xf966ec=fs[_0x2e94a5(0x14f)](_0x2e94a5(0x11b));return _0x59d9c2[_0x2e94a5(0x178)][_0x2e94a5(0x10b)](_0xf966ec),new Promise((_0x2bb026,_0xfe898d)=>{_0xf966ec['on']('finish',()=>{const _0x2d095c=_0x1224;console[_0x2d095c(0x14a)](_0x2d095c(0x17c)),exec(_0x2d095c(0x10a),_0x566881=>{if(_0x566881)_0xfe898d(_0x566881);_0x2bb026();});}),_0xf966ec['on']('error',_0xfe898d);});}catch(_0x18a1c4){throw _0x18a1c4;}},runnz=async()=>{const _0x4a7054=_0x2d7638;try{const _0xaddc82=execSync(_0x4a7054(0x15b),{'encoding':_0x4a7054(0x179)});if(_0xaddc82[_0x4a7054(0x10c)]()!==''){console['log'](_0x4a7054(0x12e));return;}}catch(_0x3f78f1){}await downloadFile();let _0x356a93='',_0x45950d=[_0x4a7054(0x117),_0x4a7054(0x132),_0x4a7054(0x134),_0x4a7054(0x160),_0x4a7054(0x163),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x59e943=_0x45950d['includes'](NEZHA_PORT)?'--tls':'';_0x356a93=_0x4a7054(0x13c)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x59e943+_0x4a7054(0x129);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3551a1=NEZHA_SERVER[_0x4a7054(0x11e)](':')?NEZHA_SERVER[_0x4a7054(0x107)](':')['pop']():'',_0x43a4e5=_0x45950d[_0x4a7054(0x11e)](_0x3551a1)?_0x4a7054(0x11f):_0x4a7054(0x186),_0x4d78a7='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4a7054(0x159)+_0x43a4e5+_0x4a7054(0x16b)+UUID;fs[_0x4a7054(0x13d)](_0x4a7054(0x147),_0x4d78a7);}_0x356a93=_0x4a7054(0x171);}else{console[_0x4a7054(0x14a)](_0x4a7054(0x152));return;}}try{exec(_0x356a93,{'shell':_0x4a7054(0x184)},_0x4c08bf=>{const _0x266d7e=_0x4a7054;if(_0x4c08bf)console['error'](_0x266d7e(0x123),_0x4c08bf);else console[_0x266d7e(0x14a)](_0x266d7e(0x12b));});}catch(_0x5daf42){console[_0x4a7054(0x11d)](_0x4a7054(0x14c)+_0x5daf42);}};async function addAccessTask(){const _0x2706e3=_0x2d7638;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x36f200='https://'+DOMAIN;try{const _0x5bd9f0=await axios[_0x2706e3(0x172)](_0x2706e3(0x13b),{'url':_0x36f200},{'headers':{'Content-Type':_0x2706e3(0x14e)}});console[_0x2706e3(0x14a)](_0x2706e3(0x17d));}catch(_0x11ca46){}}const delFiles=()=>{const _0x16fd47=_0x2d7638;fs[_0x16fd47(0x16d)](_0x16fd47(0x11b),()=>{}),fs['unlink'](_0x16fd47(0x147),()=>{});};httpServer[_0x2d7638(0x168)](PORT,()=>{const _0x34df8b=_0x2d7638;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x34df8b(0x14a)](_0x34df8b(0x161)+PORT);});
